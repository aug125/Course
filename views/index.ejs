<html>
	<head>
		 <script src="https://cdn.jsdelivr.net/npm/phaser@3.22.0/dist/phaser-arcade-physics.min.js"></script> 
		 <script src="/socket.io/socket.io.js"></script>
		 <link rel="stylesheet" href="style.css">
	</head>
		
	<body>

		<script type="text/javascript" src="game.js"></script>
		<script type="text/javascript" src="ennemi.js"></script>
		<script type="text/javascript" src="tir.js"></script>
		<script type="text/javascript" src="stats.js"></script>

		<div class="buttons" id="buttons">
			<button onclick="pilote()">Pilote</button>
			<button onclick="meca()">Mécanitien</button>
		</div>

		<script>

			function pilote(){
				game = new Phaser.Game(config);
			}

			var config = {
				type: Phaser.AUTO,
				width: window.innerWidth - 30,
				height:window.innerHeight - 30,
				scale: {
      				mode: Phaser.Scale.NONE          			
    			},
				physics: {
        			default: 'arcade'
		    	},
				scene: {
					preload: preload,
					create: create,
					update: update
				}
				
			};


			var idJoueur;
			var game;
			document.oncontextmenu = new Function("return false");
			
			// Connexion socket.io
//            var socket = io.connect('http://192.168.10.3:8080');
			var socket = io.connect('http://127.0.0.1:8080');
			
						
			document.oncontextmenu = new Function("return false");			
		
			socket.emit('newPlayer');
						
				
			// Sockets						
			
			socket.on('message', function(msg) {
				 $('#chat').append("<p>" + msg + "</p>");			
			});
			
			socket.on('vaisseau', function(id,px,py,pspeed,prange,ppuissance) {
				console.log('vaisseau');
			});
						
			socket.on('jeu', function () {
				console.log('jeu');
				socket.emit('askId');
			});

			socket.on('sendId', function(id) {
				console.log("id joueur : " + id);
				if (id == 0) // Il s'agit du premier joueur. Celui-ci va choisir le rôle
				{
					document.getElementById("buttons").style.display = "inline";
				}
				else
				{
					// Celui-ci va attendre le choix de l'autre.
				}
			});
						
        </script>
    </body>
</html>